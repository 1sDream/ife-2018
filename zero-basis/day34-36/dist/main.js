!function(t){var e={};function i(h){if(e[h])return e[h].exports;var n=e[h]={i:h,l:!1,exports:{}};return t[h].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,h){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:h})},i.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=0)}([function(t,e,i){"use strict";i.r(e);i(2);var h=[{product:"手机",region:"华东",sale:[120,100,140,160,180,185,190,210,230,245,255,270]},{product:"手机",region:"华北",sale:[80,70,90,110,130,145,150,160,170,185,190,200]},{product:"手机",region:"华南",sale:[220,200,240,250,260,270,280,295,310,335,355,380]},{product:"笔记本",region:"华东",sale:[50,60,80,110,30,20,70,30,420,30,20,20]},{product:"笔记本",region:"华北",sale:[30,35,50,70,20,15,30,50,710,130,20,20]},{product:"笔记本",region:"华南",sale:[80,120,130,140,70,75,120,90,550,120,110,100]},{product:"智能音箱",region:"华东",sale:[10,30,4,5,6,5,4,5,6,5,5,25]},{product:"智能音箱",region:"华北",sale:[15,50,15,15,12,11,11,12,12,14,12,40]},{product:"智能音箱",region:"华南",sale:[10,40,10,6,5,6,8,6,6,6,7,26]}];var n={bind:function(t){let e=t.querySelectorAll("[checkbox-type=single]"),i=t.querySelector("[checkbox-type=all]");t.addEventListener("change",function(t){let h=[...e].filter(t=>t.checked);if("all"===t.target.getAttribute("checkbox-type"))if(h.length!==e.length)for(let i=0;i<e.length;i++)e[i].checked=t.target.checked;else t.target.checked=!0;else switch(h.length){case 0:t.target.checked=!0;break;case e.length:i.checked=!0;break;default:i.checked=!1}})},init:function(){document.getElementById("select-wrapper").querySelectorAll("input").forEach(t=>{t.checked=!0})},getSelectedItems:function(){let t=[],e=[];return document.getElementById("region-wrapper").querySelectorAll("[checkbox-type=single]").forEach(e=>{e.checked&&t.push(e.value)}),document.getElementById("product-wrapper").querySelectorAll("[checkbox-type=single]").forEach(t=>{t.checked&&e.push(t.value)}),{region:t,product:e}}};function r(){let t=document.getElementById("table-wrapper");for(;t.firstChild;)t.removeChild(t.firstChild);let e=document.createElement("table");t.appendChild(e);let i=document.createElement("tbody");e.appendChild(i),i.innerHTML="<tr><th>商品</th><th>地区</th><th>1月</th><th>2月</th><th>3月</th><th>4月</th><th>5月</th><th>6月</th><th>7月</th><th>8月</th><th>9月</th><th>10月</th><th>11月</th><th>12月</th></tr>";let h=n.getSelectedItems(),r=1===h.region.length&&h.region.length<h.product.length;if(r){let t=i.rows[0].cells[0].innerText;i.rows[0].cells[0].innerText=i.rows[0].cells[1].innerText,i.rows[0].cells[1].innerText=t}s(h).forEach((t,e)=>{let n=document.createElement("tr");r?e%h.product.length==0?n.innerHTML=`<td rowspan=${h.product.length}>${t.region}</td><td>${t.product}</td>`:n.innerHTML=`<td>${t.product}</td>`:e%h.region.length==0?n.innerHTML=`<td rowspan=${h.region.length}>${t.product}</td><td>${t.region}</td>`:n.innerHTML=`<td>${t.region}</td>`,t.sale.forEach(t=>{n.innerHTML+=`<td>${t}</td>`}),i.appendChild(n)})}function s(t){let e=[];return h.forEach(i=>{t.region.indexOf(i.region)>-1&&t.product.indexOf(i.product)>-1&&e.push(i)}),e}var a={render:r,init:function(){r()},getData:s};n.bind(document.getElementById("region-wrapper")),n.bind(document.getElementById("product-wrapper")),n.init(),a.init();const o=new class{constructor(t,e={}){this.data=e.data||[],this.margin=e.margin||10,this.barColor=e.barColor||"lightblue",this.axisColor=e.axisColor||"rgb(0,0,0)",this.container=t,this.width=document.documentElement.clientWidth/2,this.height=document.documentElement.clientHeight-350,this.init()}init(){this.setAttributes(this.container,{width:this.width,height:this.height})}set(t){this.data=t,this.clear(),this.drawAxes(),this.drawBars()}clear(){for(;this.container.firstChild;)this.container.removeChild(this.container.firstChild)}drawAxes(){let t=document.createElementNS("http://www.w3.org/2000/svg","line");this.setAttributes(t,{x1:this.margin,y1:this.height-this.margin,x2:this.margin,y2:this.margin,stroke:this.axisColor,"stroke-width":2}),this.container.appendChild(t);let e=document.createElementNS("http://www.w3.org/2000/svg","line");this.setAttributes(e,{x1:this.margin,y1:this.height-this.margin,x2:this.width-this.margin,y2:this.height-this.margin,stroke:this.axisColor,"stroke-width":2}),this.container.appendChild(e)}drawBars(){let t=(this.width-2*this.margin)/(2*this.data.length+1),e=(this.height-2*this.margin)/Math.max(...this.data);this.data.forEach((i,h)=>{let n=e*i,r=document.createElementNS("http://www.w3.org/2000/svg","rect");this.setAttributes(r,{x:this.margin+t*(2*h+1),y:this.height-this.margin-n-2,width:t,height:n,fill:this.barColor}),this.container.appendChild(r)})}setAttributes(t,e){for(let i in e)t.setAttributeNS(null,i,e[i])}}(document.getElementById("svg")),c=new class{constructor(t,e={}){this.container=t,this.margin=e.margin||10,this.pointRadius=e.pointRadius||2.5,this.width=document.documentElement.clientWidth/2,this.height=document.documentElement.clientHeight-350,this.colors=["#f44242","#f48c41","#f4e541","#9af441","#41f4df","#41aff4","#4143f4","#ca41f4","#f4419d"],this.init()}init(){this.container.width=this.width,this.container.height=this.height,this.ctx=this.container.getContext("2d"),this.ctx.clearRect(0,0,this.width,this.height),this.drawAxes();let t=a.getData(n.getSelectedItems()).map(t=>t.sale);this.drawLines(t)}set(t){this.data=t,this.ctx.clearRect(0,0,this.width,this.height),this.drawLine(),this.drawAxes()}drawAxes(){this.ctx.moveTo(this.margin,this.height-this.margin),this.ctx.lineTo(this.margin,this.margin),this.ctx.moveTo(this.margin,this.height-this.margin),this.ctx.lineTo(this.width-this.margin,this.height-this.margin),this.ctx.lineWidth=2,this.ctx.strokeStyle="rgb(0,0,0)",this.ctx.stroke()}drawLine(t,e,i="rgb(0,0,0)"){let h;t&&(this.data=t);let n=(this.width-2*this.margin)/(2*this.data.length+1);e||(e=(this.height-2*this.margin)/Math.max(...this.data)),this.data.forEach((t,r)=>{let s=this.margin+n*(2*r+1),a=this.height-this.margin-e*t;this.ctx.beginPath(),this.ctx.arc(s,a,this.pointRadius,0,2*Math.PI),this.ctx.fillStyle=i,this.ctx.fill(),r&&(this.ctx.beginPath(),this.ctx.moveTo(h.x,h.y),this.ctx.lineTo(s,a),this.ctx.strokeStyle=i,this.ctx.stroke()),h={x:s,y:a}})}drawLines(t){let e=Math.max(...t.map(t=>Math.max(...t))),i=(this.height-2*this.margin)/e;t.forEach((t,e)=>{this.drawLine(t,i,this.colors[e])})}}(document.getElementById("canvas"));window.addEventListener("mouseover",function(t){if("TD"===t.target.nodeName){let e=[...t.target.parentNode.childNodes].map(t=>t.innerText).slice(2);o.set(e),c.set(e)}else c.init()}),window.addEventListener("change",function(){a.render(),c.init()})},,function(t,e,i){}]);